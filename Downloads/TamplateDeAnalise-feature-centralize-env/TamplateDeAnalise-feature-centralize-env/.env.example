# ------------------------------
# CONFIGURACAO GERAL DO ANALISADOR
# Copie este arquivo para `.env` antes de editar (ex.: `Get-Content .env.example | Set-Content .env -Encoding UTF8`).
# Defaults abaixo deixam o sistema pronto para homologacao local (pastas relativas).
# Ajuste os TODOs antes de ir para producao.
# ------------------------------

# ---- Credenciais e modelos ----
# TODO: Informe a chave do provedor (OpenAI ou Azure). Obrigatorio em ambientes reais.
DOC_ANALYZER_API_KEY=
# Modelo principal utilizado nas chamadas GPT.
DOC_ANALYZER_MODEL=gpt-5
# Modelo secundario para validacao cruzada (pode ser igual ao principal).
DOC_ANALYZER_CROSS_MODEL=gpt-5
# Limite minimo de confianca aceito pelo Validator (0-1).
DOC_ANALYZER_CONFIDENCE_THRESHOLD=0.8
# Intervalo (segundos) para escanear a pasta de entrada.
DOC_ANALYZER_POLL_INTERVAL=10
# Intervalo (segundos) para escanear feedbacks.
DOC_ANALYZER_FEEDBACK_INTERVAL=15
# Quantidade de workers paralelos do DocumentProcessor (aumente com cautela).
DOC_ANALYZER_PROCESSING_WORKERS=2
# Teto de tentativas extras quando a confianca fica abaixo do threshold.
DOC_ANALYZER_MAX_RETRIES=3
# Limites para considerar categorias secundarias com base na similaridade (0-1).
DOC_ANALYZER_SECONDARY_STRUCT_THRESHOLD=0.4
DOC_ANALYZER_SECONDARY_DOC_THRESHOLD=0.45
DOC_ANALYZER_SECONDARY_STRONG_THRESHOLD=0.8
# Temperatura aplicada nas chamadas GPT.
DOC_ANALYZER_TEMPERATURE=1.0
# Timeout (segundos) por requisicao GPT.
DOC_ANALYZER_REQUEST_TIMEOUT=60

# ---- Logs e conhecimento ----
DOC_ANALYZER_LOG_LEVEL=INFO
DOC_ANALYZER_LOG_FILE=logs/activity.jsonl
DOC_ANALYZER_TEXT_LOG_FILE=logs/system.log
DOC_ANALYZER_KNOWLEDGE_BASE_PATH=knowledge.json
DOC_ANALYZER_CATEGORY_KNOWLEDGE_ROOT=knowledge_sources
DOC_ANALYZER_KNOWLEDGE_REFRESH_ON_STARTUP=true
DOC_ANALYZER_KNOWLEDGE_REFRESH_INTERVAL=300

# ---- Estrategia de armazenamento ----
#   relative -> usa <pasta_onde_o_servico_roda>/<DOC_ANALYZER_STORAGE_RELATIVE_ROOT>  (recomendado para homolog)
#   absolute -> usa exatamente DOC_ANALYZER_STORAGE_ABSOLUTE_ROOT                        (ex.: D:/classificador_prod)
#   network  -> igual ao absolute, mas apontando para um compartilhamento montado (ex.: /mnt/classificador)
DOC_ANALYZER_STORAGE_MODE=relative
DOC_ANALYZER_STORAGE_RELATIVE_ROOT=folders
# TODO (absolute/network): informe o caminho absoluto da raiz (ex.: D:/classificador_prod ou /mnt/classificador).
DOC_ANALYZER_STORAGE_ABSOLUTE_ROOT=
DOC_ANALYZER_STORAGE_AUTO_CREATE=true
DOC_ANALYZER_STORAGE_CREATE_DEFAULT_CATEGORIES=true

# Subpastas (apenas lidas quando os valores acima nao sao absolutos).
DOC_ANALYZER_INPUT_SUBDIR=entrada
DOC_ANALYZER_PROCESSING_SUBDIR=em_processamento
DOC_ANALYZER_PROCESSING_FAIL_SUBDIR=_falhas
DOC_ANALYZER_PROCESSED_SUBDIR=processados
DOC_ANALYZER_FEEDBACK_SUBDIR=feedback
DOC_ANALYZER_FEEDBACK_PROCESSED_SUBDIR=processado
DOC_ANALYZER_COMPLEX_SAMPLES_SUBDIR=complex_samples

# ---- Webhooks (opcionais) ----
DOC_ANALYZER_TEAMS_WEBHOOK_URL=
DOC_ANALYZER_TEAMS_ACTIVITY_WEBHOOK_URL=

# ---- Azure OpenAI (opcional) ----
DOC_ANALYZER_USE_AZURE=false
DOC_ANALYZER_AZURE_ENDPOINT=
DOC_ANALYZER_AZURE_API_KEY=
DOC_ANALYZER_AZURE_DEPLOYMENT=
DOC_ANALYZER_AZURE_API_VERSION=2024-02-01

# ---- Montagem de compartilhamento (opcional) ----
DOC_ANALYZER_STORAGE_SERVICE_USER=
DOC_ANALYZER_STORAGE_SERVICE_PASSWORD=
DOC_ANALYZER_STORAGE_SERVICE_DOMAIN=
DOC_ANALYZER_STORAGE_MOUNT_COMMAND=mount -t cifs //<servidor>/classificador /mnt/classificador -o user=$DOC_ANALYZER_STORAGE_SERVICE_USER,domain=$DOC_ANALYZER_STORAGE_SERVICE_DOMAIN

# ---- Variaveis legadas (mantidas por compatibilidade) ----
OPENAI_API_KEY=
TEAMS_WEBHOOK_URL=
TEAMS_ACTIVITY_WEBHOOK_URL=
